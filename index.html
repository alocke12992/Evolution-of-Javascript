<!DOCTYPE html>
<html>

<head>
  <style>
    h1 {
      text-align: center;
    }

    #loading_zone {
      border: solid 1px black;
      min-height: 100px;
      width: 300px;
      cursor: pointer;
    }
  </style>
</head>

<body>
  <h1>Student Fights</h1>
  <div id="loading_zone">
    <label id="load_students">Load Students</label>
    <ul id="students">
    </ul>
  </div>

  <script>
    var loaded = false;

    function pullStudents() {
      if (!loaded) {
        var xhr = new XMLHttpRequest()
        xhr.onreadystatechange = function () {
          if (xhr.readyState == XMLHttpRequest.DONE) {
            var users = JSON.parse(xhr.responseText);
            var list = document.getElementById('students')
            users.forEach(function (user) {
              var li = document.createElement('li');
              li.innerText = user.name
              list.append(li);
            })
            loaded = true;
            document.getElementById('load_students').remove();
          }
        }
        xhr.open('GET', 'https://canvas-students.herokuapp.com/api/student_list/58', true);
        xhr.send(null);
      }
    }

    var button = document.getElementById('loading_zone');
    button.addEventListener('click', pullStudents)
  </script>
</body>

</html>